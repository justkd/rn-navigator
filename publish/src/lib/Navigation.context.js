"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useNavigationContext=void 0;const react_1=require("react"),Navigation_tokens_1=require("./Navigation.tokens"),useNavigationContext=(state,dispatch,routes,backgrounds)=>{const navigate=(0,react_1.useCallback)(((to,opts)=>{const{payload:payload,background:background}=opts||{};dispatch({type:"navigate",event:{to:to,payload:payload,background:background}})}),[dispatch]),to=(0,react_1.useMemo)((()=>{const entries=Object.keys(routes).map((k=>[k,k]));return Object.fromEntries(entries)}),[routes]),bg=(0,react_1.useMemo)((()=>{const entries=Object.keys(backgrounds).map((k=>[k,k]));return Object.fromEntries(entries)}),[backgrounds]),peek=(0,react_1.useCallback)((()=>{const peeked={...state};return Object.freeze(peeked),Object.seal(peeked),peeked}),[state]),payload=(0,react_1.useCallback)((n=>{const load=(n?[...state.history].reverse()[n-1]:state.queue[0])?.payload||null;return load||null}),[state.history,state.queue]),back=(0,react_1.useMemo)((()=>Navigation_tokens_1.backToken),[]);return{ctx:(0,react_1.useMemo)((()=>({navigate:navigate,peek:peek,to:to,bg:bg,back:back,get:{payload:payload}})),[navigate,peek,to,bg,back,payload])}};exports.useNavigationContext=useNavigationContext;