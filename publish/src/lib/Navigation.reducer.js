"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.navigationReducer=void 0;const Navigation_tokens_1=require("./Navigation.tokens");function navigationReducer(state,action){switch(action.type){case"init":return{...state,queue:[{to:action.event}]};case"set":{const next=action.event;return{...state,...next}}case"clear":return{queue:[],history:[],isNavigating:null,background:void 0};case"navigate":{const event=action?.event&&"string"!=typeof action?.event?action?.event:null,background="string"!=typeof action.event&&"boolean"!=typeof action.event?action.event?.background:void 0,whichBackType=state.history.length?Navigation_tokens_1.navDirTokens.back:Navigation_tokens_1.navDirTokens.error,isNavigating="boolean"!=typeof event&&event?.to===Navigation_tokens_1.backToken?whichBackType:Navigation_tokens_1.navDirTokens.fwd;return event?{...state,background:background,isNavigating:isNavigating,queue:[...state.queue,event]}:state}case"end_navigation_animation":return{...state,isNavigating:null};case"go_back_in_history":{if(!state.history.length){const queue=[...state.queue];return queue.pop(),{...state,queue:queue}}const history=[...state.history],prev=history.pop(),queue=prev?[prev]:[...state.queue];return{...state,queue:queue,history:history}}case"go_forward_in_history":{const queue=[...state.queue],event=[queue.shift()],history=event.length?[...state.history,...event]:[...state.history];return{...state,queue:queue,history:history}}default:throw Error(`rn-navigator : unknown navigation action : ${action.type}`)}}exports.navigationReducer=navigationReducer;